INSTALLING
----------

1) Untar de file (you already done that)

2) Change to the extracton directory asternic-stats

#> cd asternic*

3) Edit ./queue-stats/config.php to set your db user and pass,
   the AMI credentials (as set in /etc/asterisk/manager.conf).
   You can also select the language.

4) Move /queue-stats to a suitable place on your web root (/var/www/html/queue-stats for example)

#> mv queue-stats /var/www/html/queue-stats

5) Create a new database named 'qstatslite' and related tables:

#> mysql -u root -p < ./sql/qstats.sql

6) Edit ./parselog/config.php to set the location and 
   name of the queue_log file and your db user and pass

7) Move the parselog directory to its final location:

#> mv parselog /usr/local/parselog


PARSING LOGS
------------


Inside /usr/local/parselog directory you will find a script to do
the job named parselog.php. To test it, change to that directory and
run it by hand:

#> cd /usr/local/parselog
#> ./parselog.php convertlocal

If you dont have binftm_misc installed you might need
to run 'php -q ./parselog.php'

#> cd /usr/local/parselog
#> php -q ./parselog.php convertlocal

To parse the log at periodic intervals via a cronjob, you can write
a script in /etc/cron.hourly named qstatslog with these commands :

#> echo "#!/bin/bash" > /etc/cron.hourly
#> echo "cd /usr/local/parselog" >> /etc/cron.hourly
#> echo "./parselog.php convertlocal" >> /etc/cron.hourly

Be sure to set execute permissions to it:

#> chmod a+x /etc/cron.hourly/qstatslog

* REALTIME parsing

Realtime parsing is only available in the PRO version.

MAINTENANCE
-----------

If you want to clear/purgue the tables, run parselog.php with
the purge parameter:

./parselog.php purgue

Attention! It will remove all queue activity from the logs so you
can start afresh.


ACCESING STATS
--------------

Point your browser to the new url and that's it (http://your_ip_address/queue-stats)
